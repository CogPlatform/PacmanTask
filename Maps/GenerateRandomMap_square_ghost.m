function empty_map = GenerateRandomMap_square_ghost
global startTile pstartTile;
global ghostNumber;
global deadline; deadline = 60*3600;
global map_rand;

map_rand = rand;
num_dots = 9;
% dot_percentage = 0.7;
if map_rand <0.5
empty_map = [ ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '|||||||||||||||||||_________' ...
    '|                 |_________' ...
    '|o|||||||||||||||.|_________' ...
    '| |_____________|.|_________' ...
    '| |_____________|.|_________' ...
    '| |_____________|.|_________' ...
    '| |_____________|.|_________' ...
    '| |_____________|.|_________' ...
    '| |_____________|.|_________' ...
    '| |_____________|.|_________' ...
    '| |||||||||||||||.|_________' ...
    '|                 |_________' ...
    '|||||||||||||||||||_________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...   
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________'];

dots_pos = find(empty_map=='.');
no_dots_idx = randperm(length(dots_pos),length(dots_pos)-num_dots);
no_dots_pos = dots_pos(no_dots_idx);
for i = 1:length(no_dots_pos)
    empty_map(no_dots_pos(i)) = ' ';
end

startTile(:,1:2) = [18 15;15 19];
pstartTile = struct('x',2,'y',15);
ghostNumber = 1;

else

empty_map = [ ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '|||||||||||||||||||_________' ...
    '|                 |_________' ...
    '|.||||||||||||||| |_________' ...
    '|.|_____________| |_________' ...
    '|.|_____________| |_________' ...
    '|.|_____________| |_________' ...
    '|.|_____________| |_________' ...
    '|.|_____________| |_________' ...
    '|.|_____________| |_________' ...
    '|.|_____________| |_________' ...
    '|.||||||||||||||| |_________' ...
    '|                o|_________' ...
    '|||||||||||||||||||_________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...   
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________'];

dots_pos = find(empty_map=='.');
no_dots_idx = randperm(length(dots_pos),length(dots_pos)-num_dots);
no_dots_pos = dots_pos(no_dots_idx);
for i = 1:length(no_dots_pos)
    empty_map(no_dots_pos(i)) = ' ';
end

startTile(:,1:2) = [2 15;15 19];
pstartTile = struct('x',18,'y',15);
ghostNumber = 1;
end
end
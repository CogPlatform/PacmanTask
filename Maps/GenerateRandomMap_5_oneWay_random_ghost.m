function empty_map = GenerateRandomMap_5_oneWay_random_ghost
global startTile pstartTile;
global ghostNumber;ghostNumber = 1;
global map_rand;
global deadline; deadline = 60*3600;
global ghost_rand;
global ghoststay; ghoststay=1;
% dot_percentage = 0.7;
map_rand = rand;  % defines map type
num_dots = 4;  % the number of random dots in a map
ghost_rand = rand;

%%
if map_rand < 0.125
    empty_map = [ ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '_||||||||||||||||||||||||||_' ...
        '_|            ............|_' ...
        '_||||||||||||||||||||||||||_' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________'];
        startTile(:,1:2) = [3 15;18 19];
elseif map_rand < 0.25
    empty_map = [ ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '_||||||||||||||||||||||||||_' ...
        '_|...........             |_' ...
        '_||||||||||||||||||||||||||_' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________'];
        startTile(:,1:2) = [26 15;18 19];
elseif map_rand < 0.375
    empty_map = [ ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________|||_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|||_____________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________'];
    startTile(:,1:2) = [14 15;5 19];
elseif map_rand < 0.5
    empty_map = [ ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________|||_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________|||_____________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________'];
    startTile(:,1:2) = [14 15;32 19];

elseif map_rand < 0.625
    empty_map = [ ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '_||||||||||||||||||||||||||_' ...
        '_|....    o               |_' ...
        '_||||||||||||||||||||||||||_' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________'];
        startTile(:,1:2) = [9 9;18 19];
elseif map_rand < 0.75
    empty_map = [ ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '_||||||||||||||||||||||||||_' ...
        '_|               o    ....|_' ...
        '_||||||||||||||||||||||||||_' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________'];
        startTile(:,1:2) = [21 21;18 19];
elseif map_rand < 0.875
    empty_map = [ ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________|||_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________|o|_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________|||_____________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________'];
    startTile(:,1:2) = [14 15;11 11];
else
    empty_map = [ ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________|||_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________|o|_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|.|_____________' ...
    '____________|||_____________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________'];
    startTile(:,1:2) = [14 15;25 25];
end

dots_pos = find(empty_map=='.');
no_dots_idx = randperm(length(dots_pos),length(dots_pos)-num_dots);
no_dots_pos = dots_pos(no_dots_idx);
for i = 1:length(no_dots_pos)
    empty_map(no_dots_pos(i)) = ' ';
end
        
pstartTile = struct('x',14,'y',18);

end
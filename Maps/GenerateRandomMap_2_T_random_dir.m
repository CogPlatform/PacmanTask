function empty_map = GenerateRandomMap_2_T_random_dir
global startTile pstartTile;
global ghostNumber;
global map_rand;
global deadline; deadline = 60*3600;
global ghost_rand;
global ghoststay; ghoststay=1;
% dot_percentage = 0.7;
map_rand = rand;  % defines map type
num_dots = 8;  % the number of random dots in a map
ghost_rand = rand;

%%
if map_rand < 0.25
    empty_map = [ ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '_||||||||||||||||||||||||||_' ...
        '_|                        |_' ...
        '_|||||||||||| |||||||||||||_' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________|||_____________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________'];

        % if 3*ghost_rand<=1
        %     dots_x =[3:14];dots_y=18;
        %     for i=1:11
        %     dots_pos(i)=dots_x(i)+28*(dots_y-1);
        %     end
        %     startTile(:,1:2) = [14 26;30 18];
        % elseif 3*ghost_rand<=2
            dots_x =14;dots_y=[19:30];
            for i=1:11
            dots_pos(i)=dots_x+28*(dots_y(i)-1);
            end
            startTile(:,1:2) = [3 26;18 18];
        % else
        %     dots_x =[15:26];dots_y=18;
        %     for i=1:11
        %     dots_pos(i)=dots_x(i)+28*(dots_y-1);
        %     end
        %     startTile(:,1:2) = [3 14;18 30];
        % end
        pstartTile = struct('x',14,'y',18);
        
elseif map_rand < 0.5
    empty_map = [ ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________|||_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '____________| |_____________' ...
        '_|||||||||||| |||||||||||||_' ...
        '_|                        |_' ...
        '_||||||||||||||||||||||||||_' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________' ...
        '____________________________'];
        % if 3*ghost_rand<=1
        %     dots_x =[3:14];dots_y=18;
        %     for i=1:11
        %     dots_pos(i)=dots_x(i)+28*(dots_y-1);
        %     end
        %     startTile(:,1:2) = [14 26;7 18];
        % elseif 3*ghost_rand<=2
            dots_x =14;dots_y=[7:18];
            for i=1:11
            dots_pos(i)=dots_x+28*(dots_y(i)-1);
            end
            startTile(:,1:2) = [3 26;18 18];
        % else
        %     dots_x =[15:26];dots_y=18;
        %     for i=1:11
        %     dots_pos(i)=dots_x(i)+28*(dots_y-1);
        %     end
            % startTile(:,1:2) = [3 14;18 7];
        % end
        pstartTile = struct('x',14,'y',18);

elseif map_rand < 0.75
% if map_type == 0
    empty_map = [ ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________|||_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '_|||||||||||| |_____________' ...
    '_|            |_____________' ...
    '_|||||||||||| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________|||_____________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________'];
%         if 3*ghost_rand<=1
%             dots_x =14;dots_y=[8:19];
%             for i=1:11
%             dots_pos(i)=dots_x+28*(dots_y(i)-1);
%             end
%             startTile(:,1:2) = [3 14;19 30];
%         elseif 3*ghost_rand<=2
            dots_x =[3:14];dots_y=19;
            for i=1:11
            dots_pos(i)=dots_x(i)+28*(dots_y-1);
            end
            startTile(:,1:2) = [14 14;8 30];
%         else
%             dots_x =14;dots_y=[19:30];
%             for i=1:11
%             dots_pos(i)=dots_x+28*(dots_y(i)-1);
%             end
%             startTile(:,1:2) = [3 14;19 8];
%         end
        pstartTile = struct('x',14,'y',19);

else
    empty_map = [ ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________|||_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |||||||||||||_' ...
    '____________|             |_' ...
    '____________| |||||||||||||_' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________| |_____________' ...
    '____________|||_____________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________' ...
    '____________________________'];
%         if 3*ghost_rand<=1
%             dots_x =14;dots_y=[8:19];
%             for i=1:10
%             dots_pos(i)=dots_x+28*(dots_y(i)-1);
%             end
%             startTile(:,1:2) = [26 14;19 30];
%         elseif 3*ghost_rand<=2
            dots_x =[15:26];dots_y=19;
            for i=1:11
            dots_pos(i)=dots_x(i)+28*(dots_y-1);
            end
            startTile(:,1:2) = [14 14;8 30];
%         else
%             dots_x =14;dots_y=[19:30];
%             for i=1:11
%             dots_pos(i)=dots_x+28*(dots_y(i)-1);
%             end
%             startTile(:,1:2) = [26 14;19 8];
%         end
        pstartTile = struct('x',14,'y',19);

end


% dots_pos = find(empty_map=='.');
% no_dots_idx = randperm(length(dots_pos),length(dots_pos)-num_dots);
% no_dots_pos = dots_pos(no_dots_idx);
for i = 1:length(dots_pos)
    empty_map(dots_pos(i)) = '.';
end
%         
% startTile(:,1:2) = [14 15;18 19];
% pstartTile = struct('x',14,'y',18);
ghostNumber = 2;
end